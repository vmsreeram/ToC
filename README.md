# Theory of Computation: Programming Assignment

**Note** : This is the detailed version of README. The concise version for convinence is accessible [here](project/README.md).

The program expects input from [STDIN](https://en.wikipedia.org/wiki/Standard_streams#Standard_input_(stdin)) and prints output to [STDOUT](https://en.wikipedia.org/wiki/Standard_streams#Standard_output_(stdout)). Command line input output redirection may be used for file input-output.

## Abstract
The aim of this project is to build a tool similar to `grep`. Given a regular expression ***R*** and an input string ***s***, we check if ***s ∈ L(R)***.

The following is an abstract of what's happening :
- Given a regular expression ***R***, a Non-deterministic Finite Automata (NFA) is constructed accepting *only* ***R***.
- The NFA is converted to a Deterministic Finite Automata (DFA) using [subset construction method](https://en.wikipedia.org/wiki/Powerset_construction).
- The DFA is minimised using [DFA minimisation algorithm](https://en.wikipedia.org/wiki/DFA_minimization).
- Then it is checked whether ***s*** is accepted by the minimised DFA.

### Input format
- First line of each test file contains an integer ***N*** representing number of test cases in that file. Then ***2×N*** lines follow, 2 for each test case.
- Each test case consists of two lines -- the first one being ***R***, and the second being ***s***.
- The supported operations in the regular expression are union (+), concat (·) and star (\*). Suppose that the regular expression is ((a + b)\*)· c and we want to check membership for `abc`. Then this test case will be specified in the test file as,
    ```
    concat(star(union(symbol(a),symbol(b))),symbol(c))
    abc
    ```
- It is assumed that all test files strictly follow the convensions. Although most cases of invalid output are programmed to `abort`, it is not guarenteed.

### Output format
- There will be ***N*** lines in the output file -- each line corresponding to each test case. For each test case,
  - `Yes` will be printed if ***s ∈ L(R)***.
  - `No` will be printed otherwise.


## Files
1. [`regexMatcher.cpp`](project/regexMatcher.cpp) is the program that solves the assignment.
2. [`run.in`](project/run.in) and [`run.out`](project/run.out) are used when `make run` command is used. [`run.in`](project/run.in) is from where input is read from, and the output is written to [`run.out`](project/run.out).
3. [`Makefile`](project/Makefile) helps to compile the program and run the project.
4. [`.compareop.sh`](project/.compareop.sh) may be used to compare two output files - corresponding to a single input file - the one to be tested and the correct one. It prints the difference as well as the corresponding input that led to mismatch. See detailed help by passing `-h` option or reading [this](#how-to-use-comparator-to-compare-two-outputs) section.
5. [`.testGenerator1.cpp`](project/.testGenerator1.cpp) is used to help in generating test files in the required format. Most of the code for this file was adapted from [StackOverflow](https://stackoverflow.com/a/2381031). See [below](#test-generator) for details.

## How to run
Any of the following ways may be used.
1. Compile `regexMatcher.cpp` by running 
    ```bash
    make
    ```
    Then the corresponding executable `regexMatcher` will be generated. It may be tested in any way, one way being [input-output redirection](https://www.geeksforgeeks.org/input-output-redirection-in-linux/):
    ```bash
    ./regexMatcher < path/to/testFile > path/to/outFile
    ```
    where `path/to/testFile` and `path/to/outFile` are appropriately set.

2. The test file may be pasted into `run.in`. The following commands will execute the test, and the output be written into `run.out`.
    ```bash
    make run
    ```
3. Multiple test cases may be kept in [`.tests/`](project/.tests/). All the test cases can be run by running 
    ```bash
    make test
    ```
    The outputs will be created in [`.testouts/.tests/`](project/.testouts/.tests/) with same name that of each test file.

##
The created executable may be cleaned with this command. Note that any new files added will also be removed.
```bash
make clean
```

## How to use comparator to compare two outputs
Usage:
```bash
./.compareop.sh output1 output2 input
```
`output1` and `output2` will be the files that will be compared. `input` should be the corresponding input file.

## Test generator
Reference : [StackOverflow](https://stackoverflow.com/a/2381031)

A test file with all possible combinations of input strings with alphabets in `line 5` of [`.testGenerator1.cpp`](project/.testGenerator1.cpp) of all lengths until the value given at `line 36` for some regular expression ***R*** will be generated by this generator.

If tests for a regular expression, say `star(union(symbol(a),symbol(b)))`, is to be generated, do the following steps:
1. Edit lines 5, 6, and 36 of [`.testGenerator1.cpp`](project/.testGenerator1.cpp) as per the requirements.
2. Then generate the executable using
    ```bash
    make gener
    ```
    Then the corresponding executable `gener` will be generated. 
3. Then run this to generate and write the test file to [`run.in`](project/run.in).
    ```bash
    ./gener 'star(union(symbol(a),symbol(b)))' > run.in   
    ```